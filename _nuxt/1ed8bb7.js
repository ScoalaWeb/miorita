(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{250:function(t,o,e){var content=e(256);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(45).default)("4a06c652",content,!0,{sourceMap:!1})},254:function(t,o,e){t.exports=e.p+"img/character.d4bc271.svg"},255:function(t,o,e){"use strict";var n=e(250),r=e.n(n);e.d(o,"default",(function(){return r.a}))},256:function(t,o,e){var n=e(44)(!1);n.push([t.i,'.world_3rP_s{display:grid;grid-template-rows:2rem auto 10rem}.button_3Ek0U{padding:.2em .7em;background:#fff;border:1px solid;border-radius:.3em;margin:.5em;cursor:pointer}.button_3Ek0U:focus,.button_3Ek0U:hover{background:#333;color:#fff}.table_13ujH{--cell-width:10%;--wall-color:#c9c9c9;--wall-warning-color:rgba(255,156,156,0.44);width:100%;border-collapse:separate;table-layout:fixed;height:100%}.cell_KVzIN{width:var(--cell-width);padding-bottom:var(--cell-width);position:relative}.cell_KVzIN:before{content:"+";display:grid;font-weight:700;color:#eee}.cell_KVzIN:before,.cell__inner_Qt8KI{position:absolute;top:0;bottom:0;left:0;right:0;justify-content:center;align-items:center}.cell__inner_Qt8KI{border:2px solid transparent;overflow:hidden}.cell__img_3z7fk{max-width:100%;max-height:100%}.wall_right_3y8ZV{border-right-color:var(--wall-color)}.cell_current_EqhGO.wall_right_3y8ZV.facing_right_2GANQ{border-right-color:var(--wall-warning-color)}.wall_left_3ed0W{border-left-color:var(--wall-color)}.cell_current_EqhGO.wall_left_3ed0W.facing_left_2lA7c{border-left-color:var(--wall-warning-color)}.wall_top_334ZH{border-top-color:var(--wall-color)}.cell_current_EqhGO.wall_top_334ZH.facing_up_gjsjv{border-top-color:var(--wall-warning-color)}.wall_bottom_vDrqZ{border-bottom-color:var(--wall-color)}.cell_current_EqhGO.wall_bottom_vDrqZ.facing_down_12JOQ{border-bottom-color:var(--wall-warning-color)}.facing_up_gjsjv img{transform:rotate(-90deg)}.facing_down_12JOQ img{transform:rotate(90deg)}.facing_left_2lA7c img{transform:scaleX(-1)}.console_26Y5P{display:flex;flex-direction:column;overflow:auto;grid-gap:.5em;gap:.5em;background:#000;color:#fff;padding:1rem}.error_2OoOC{color:red}',""]),n.locals={world:"world_3rP_s",button:"button_3Ek0U",table:"table_13ujH",cell:"cell_KVzIN",cell__inner:"cell__inner_Qt8KI",cell__img:"cell__img_3z7fk",wall_right:"wall_right_3y8ZV",cell_current:"cell_current_EqhGO",facing_right:"facing_right_2GANQ",wall_left:"wall_left_3ed0W",facing_left:"facing_left_2lA7c",wall_top:"wall_top_334ZH",facing_up:"facing_up_gjsjv",wall_bottom:"wall_bottom_vDrqZ",facing_down:"facing_down_12JOQ",console:"console_26Y5P",error:"error_2OoOC"},t.exports=n},259:function(t,o,e){"use strict";e.r(o);var n,r=e(18),l=(e(249),e(53),e(37),e(252)),c=e(261),f=(e(8),e(30),e(36),e(262),e(43),e(56),n=function(t,b){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(t[p]=b[p])})(t,b)},function(t,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function o(){this.constructor=t}n(t,b),t.prototype=null===b?Object.create(b):(o.prototype=b.prototype,new o)}),h=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.isRunnerError=!0,o}return f(o,t),o}(Error),_=function(){var t=function(o,b){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(t[p]=b[p])})(o,b)};return function(o,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function e(){this.constructor=o}t(o,b),o.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}}(),d=function(){return(d=Object.assign||function(t){for(var s,i=1,o=arguments.length;i<o;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},v="NESW",y=function(){function t(t,o){this.moveWatchers=[],this.options=t,this.current=o}return t.prototype.turnLeft=function(){var t=this.current.orientation,o=v.indexOf(t)-1;o<0&&(o=v.length-1),this.current.orientation=v[o],this.addMove("rotate-left")},t.prototype.turnRight=function(){var t=this.current.orientation,o=v.indexOf(t)+1;o>=v.length&&(o=0),this.current.orientation=v[o],this.addMove("rotate-right")},t.prototype.nextPosition=function(){var t,o,e,n=this.current,r=n.orientation,l=n.position,c=this.options,f=c.size,_=c.walls;switch(r){case"N":o="y",e=-1;break;case"S":o="y",e=1;break;case"W":o="x",e=-1;break;case"E":o="x",e=1;break;default:throw new h("orientation")}var v=l[o]+e;if(v<0||v>=f[o])throw new h("map-overflow");var y=d(d({},l),((t={})[o]=v,t)),w=new h("wall-hit"),m=e<0?y:l;if(_[o].some((function(t){return t.x===m.x&&t.y===m.y})))throw w;return{axis:o,sign:e,position:y}},t.prototype.move=function(){try{var t=this.nextPosition().position;return this.current.position=t,this.addMove("forward"),Promise.resolve()}catch(t){return Promise.reject(t)}},t.prototype.canMove=function(){try{return this.nextPosition(),this.addMove("move-possible"),!0}catch(t){return this.addMove("move-blocked"),!1}},t.prototype.reset=function(){this.current.position=d({},this.options.start.position),this.current.orientation=this.options.start.orientation,this.addMove("reset")},t.prototype.addMove=function(t){this.moveWatchers.forEach((function(o){o(t)}))},t.prototype.onMove=function(t){this.moveWatchers.push(t)},t}(),w=function(t){function o(o,e,n){void 0===n&&(n=!1);var r=t.call(this,o,e)||this;return r.queue=[],r.ended=!1,r.nextAction="",r.debug=n,r}return _(o,t),o.GetActions=function(){var t=["constructor","nextPosition","addMove","onMove"];return Object.getOwnPropertyNames(y.prototype).filter((function(o){return!t.includes(o)}))},o.prototype.addToQueue=function(t){this.queue.push(t),this.debug||this.stepOver()},o.prototype.stepOver=function(){var t=this.queue.shift();"function"==typeof t&&t()},o.prototype.stop=function(){this.ended=!0},o}(y),m=w;w.GetActions().forEach((function(t){var o=w.prototype[t];w.prototype[t]=function(){for(var e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new Promise((function(r,l){try{e.addMove("next-"+t),e.addToQueue((function(){if(e.ended)l();else{var t=o.apply(e,n);e.debug?r(t):setTimeout((function(){r(t)}),e.options.timeout)}}))}catch(t){e.ended=!0,l(t)}}))}}));e(180),e(46),e(88),e(263),e(55),e(54);var x=[{regex:/(?<!async\s+)function/gi,replacer:"async function"}];function O(code){var script=code,t=m.GetActions(),o="_"+(1e3*Math.random()).toFixed(0);return t.forEach((function(t){var e="await "+o+"."+t;script=script.replace(function(t){return new RegExp("(?<![a-z_\\$])"+t+"(?=\\s*\\()","ig")}(t),e)})),x.forEach((function(t){script=script.replace(t.regex,t.replacer)})),script.includes("await")||(script+="; return Promise.resolve();"),new Function(o,"return Promise.resolve().then(async function(){"+script+"});")}var M=function(){var t=function(o,b){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(t[p]=b[p])})(o,b)};return function(o,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function e(){this.constructor=o}t(o,b),o.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}}(),j=function(){return(j=Object.assign||function(t){for(var s,i=1,o=arguments.length;i<o;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},$=function(t,o,e,desc){var n,l=arguments.length,c=l<3?o:null===desc?desc=Object.getOwnPropertyDescriptor(o,e):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(r.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,o,e,desc);else for(var i=t.length-1;i>=0;i--)(n=t[i])&&(c=(l<3?n(c):l>3?n(o,e,c):n(o,e))||c);return l>3&&c&&Object.defineProperty(o,e,c),c},k=function(t,o){for(var i=0,e=o.length,n=t.length;i<e;i++,n++)t[n]=o[i];return t},E=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.current={position:{x:0,y:0},orientation:"E"},o.actions=null,o.moves=[],o}return M(o,t),o.prototype.range=function(t){return k([],new Array(t)).map((function(t,o){return o}))},o.prototype.isCurrent=function(t,col){var o=this.current.position,e=o.x;return t===o.y&&col===e},o.prototype.hasWallRight=function(t,col){return this.options.walls.x.some((function(o){return t===o.y&&col===o.x}))},o.prototype.hasWallLeft=function(t,col){return this.hasWallRight(t,col-1)},o.prototype.hasWallBottom=function(t,col){return this.options.walls.y.some((function(o){return t===o.y&&col===o.x}))},o.prototype.hasWallTop=function(t,col){return this.hasWallBottom(t-1,col)},o.prototype.onMovedUpdated=function(){var t=this;this.$nextTick((function(){t.$refs.console.scrollTop=t.$refs.console.scrollHeight}))},o.prototype.run=function(t){var o=this;void 0===t&&(t=!1),this.moves=[],this.actions=new m(this.options,this.current,t),this.actions.onMove((function(t){o.moves.push(t)})),O(this.$store.state.code)(this.actions).then((function(){o.moves.push("end")})).catch((function(t){new c.Howl({src:o.$nuxt.context.base+"sounds/bleating.mp3"}).play(),t.isRunnerError?o.moves.push("error-"+t.message):(o.moves.push("error-generic-"+t.message),console.error(t))})).then((function(){o.actions=null})),t&&this.$nextTick((function(){o.actions&&o.actions.stepOver()}))},o.prototype.debug=function(){this.run(!0)},o.prototype.stepOver=function(){this.actions&&this.actions.stepOver()},Object.defineProperty(o.prototype,"cellWidthStyle",{get:function(){return{"--cell-width":100/Math.max(this.options.size.x,this.options.size.y)+"%"}},enumerable:!1,configurable:!0}),o.prototype.reset=function(){this.actions&&this.actions.stop();var t=this.options.start;this.current={position:j({},t.position),orientation:"E"},this.moves=[]},o.prototype.created=function(){this.reset()},$([Object(l.b)({default:function(){return{size:{x:4,y:4},start:{position:{x:0,y:0},orientation:"e"},walls:{x:[{x:0,y:0}],y:[{x:1,y:0}]},timeout:1e3}}})],o.prototype,"options",void 0),$([Object(l.d)("moves",{deep:!0})],o.prototype,"onMovedUpdated",null),o=$([l.a],o)}(l.c),P=e(255),W=e(32);var component=Object(W.a)(E,(function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("div",{class:t.$style.world},[n("div",[t.actions?t._e():n("button",{class:t.$style.button,attrs:{type:"button"},on:{click:function(o){return t.run()}}},[t._v("\n            Run\n        ")]),t._v(" "),t.actions?t._e():n("button",{class:t.$style.button,attrs:{type:"button"},on:{click:t.reset}},[t._v("\n            Reset\n        ")]),t._v(" "),t.actions?t._e():n("button",{class:t.$style.button,attrs:{type:"button"},on:{click:t.debug}},[t._v("\n            Debug\n        ")]),t._v(" "),t.actions&&t.actions.debug?n("button",{class:t.$style.button,attrs:{type:"button"},on:{click:t.stepOver}},[t._v("\n            Step over\n        ")]):t._e()]),t._v(" "),n("table",{class:t.$style.table,style:t.cellWidthStyle},[n("tbody",t._l(t.range(t.options.size.y),(function(o){return n("tr",{key:o},t._l(t.range(t.options.size.x),(function(col){var r;return n("td",{key:col,class:t.$style.cell},[n("div",{class:(r={},r[t.$style.cell__inner]=!0,r[t.$style.cell_current]=t.isCurrent(o,col),r[t.$style.wall_right]=t.hasWallRight(o,col),r[t.$style.wall_left]=t.hasWallLeft(o,col),r[t.$style.wall_top]=t.hasWallTop(o,col),r[t.$style.wall_bottom]=t.hasWallBottom(o,col),r[t.$style.facing_up]="N"===t.current.orientation,r[t.$style.facing_down]="S"===t.current.orientation,r[t.$style.facing_left]="W"===t.current.orientation,r[t.$style.facing_right]="E"===t.current.orientation,r)},[t.isCurrent(o,col)?n("img",{class:t.$style.cell__img,attrs:{src:e(254),alt:"Mioara"}}):t._e()])])})),0)})),0)]),t._v(" "),n("div",{ref:"console",class:t.$style.console},t._l(t.moves,(function(o,e){return n("div",{key:o+e},["reset"===o?[t._v("\n                Miorița teleported to the start position\n            ")]:"rotate-left"===o?[t._v("\n                Miorița turned left (counter-clockwise)\n            ")]:"rotate-right"===o?[t._v("\n                Miorița turned right (clockwise)\n            ")]:"forward"===o?[t._v("\n                Miorița moved forward\n            ")]:"move-possible"===o?[t._v("\n                Miorița realized she can move forward\n            ")]:"move-blocked"===o?[t._v("\n                Miorița realized she cannot move forward\n            ")]:"next-turnLeft"===o?[t._v("\n                Miorița will turn left\n            ")]:"next-turnRight"===o?[t._v("\n                Miorița will turn right\n            ")]:"next-canMove"===o?[t._v("\n                Miorița is analyzing if she can move forward\n            ")]:"next-move"===o?[t._v("\n                Miorița will try to move forward\n            ")]:"end"===o?[t._v("\n                Miorița has ended her programming\n            ")]:"error-orientation"===o?n("span",{class:t.$style.error},[t._v("\n                Miorița is a little dizzy\n            ")]):"error-map-overflow"===o?n("span",{class:t.$style.error},[t._v("\n                Miorița cannot get out of her sheepfold\n            ")]):"error-wall-hit"===o?n("span",{class:t.$style.error},[t._v("\n                Miorița cannot get over the fence\n            ")]):o.startsWith("error-generic")?n("span",{class:t.$style.error},[t._v("\n                "+t._s(o.substring("error-generic-".length))+"\n            ")]):t._e()],2)})),0)])}),[],!1,(function(t){this.$style=P.default.locals||P.default}),null,null);o.default=component.exports}}]);