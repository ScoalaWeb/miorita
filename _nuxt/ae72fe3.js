(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{250:function(t,e,o){var content=o(256);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(44).default)("4a06c652",content,!0,{sourceMap:!1})},254:function(t,e,o){t.exports=o.p+"img/character.d4bc271.svg"},255:function(t,e,o){"use strict";var r=o(250),n=o.n(r);o.d(e,"default",(function(){return n.a}))},256:function(t,e,o){var r=o(43)(!1);r.push([t.i,'.world_3rP_s{display:flex;flex-direction:column}.button_3Ek0U{padding:.2em .7em;background:#fff;border:1px solid;border-radius:.3em;margin:.5em;cursor:pointer}.button_3Ek0U:focus,.button_3Ek0U:hover{background:#333;color:#fff}.table_13ujH,.table_wrapper_1w5Tj{flex-grow:1}.table_13ujH{--cell-width:1rem;--wall-color:#c9c9c9;--wall-warning-color:rgba(255,156,156,0.44);border-collapse:separate;table-layout:fixed;margin-left:auto;margin-right:auto}.cell_KVzIN{width:var(--cell-width);padding-bottom:var(--cell-width);position:relative}.cell_KVzIN:before{content:"+";display:grid;font-weight:700;color:#eee}.cell_KVzIN:before,.cell__inner_Qt8KI{position:absolute;top:0;bottom:0;left:0;right:0;justify-content:center;align-items:center}.cell__inner_Qt8KI{border:2px solid transparent;overflow:hidden}.cell__img_3z7fk{max-width:100%;max-height:100%}.wall_right_3y8ZV{border-right-color:var(--wall-color)}.cell_current_EqhGO.wall_right_3y8ZV.facing_right_2GANQ{border-right-color:var(--wall-warning-color)}.wall_left_3ed0W{border-left-color:var(--wall-color)}.cell_current_EqhGO.wall_left_3ed0W.facing_left_2lA7c{border-left-color:var(--wall-warning-color)}.wall_top_334ZH{border-top-color:var(--wall-color)}.cell_current_EqhGO.wall_top_334ZH.facing_up_gjsjv{border-top-color:var(--wall-warning-color)}.wall_bottom_vDrqZ{border-bottom-color:var(--wall-color)}.cell_current_EqhGO.wall_bottom_vDrqZ.facing_down_12JOQ{border-bottom-color:var(--wall-warning-color)}.facing_up_gjsjv img{transform:rotate(-90deg)}.facing_down_12JOQ img{transform:rotate(90deg)}.facing_left_2lA7c img{transform:scaleX(-1)}.console_26Y5P{display:flex;flex-direction:column;overflow:auto;grid-gap:.5em;gap:.5em;background:#000;color:#fff;padding:1rem;height:4.5rem}.error_2OoOC{color:red}',""]),r.locals={world:"world_3rP_s",button:"button_3Ek0U",table:"table_13ujH",table_wrapper:"table_wrapper_1w5Tj",cell:"cell_KVzIN",cell__inner:"cell__inner_Qt8KI",cell__img:"cell__img_3z7fk",wall_right:"wall_right_3y8ZV",cell_current:"cell_current_EqhGO",facing_right:"facing_right_2GANQ",wall_left:"wall_left_3ed0W",facing_left:"facing_left_2lA7c",wall_top:"wall_top_334ZH",facing_up:"facing_up_gjsjv",wall_bottom:"wall_bottom_vDrqZ",facing_down:"facing_down_12JOQ",console:"console_26Y5P",error:"error_2OoOC"},t.exports=r},259:function(t,e,o){"use strict";o.r(e);var r,n=o(18),l=(o(252),o(56),o(37),o(267)),c=o(261),f=(o(8),o(30),o(36),o(262),o(45),o(55),r=function(t,b){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(t[p]=b[p])})(t,b)},function(t,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function e(){this.constructor=t}r(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isRunnerError=!0,e}return f(e,t),e}(Error),_=function(){var t=function(e,b){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(t[p]=b[p])})(e,b)};return function(e,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function o(){this.constructor=e}t(e,b),e.prototype=null===b?Object.create(b):(o.prototype=b.prototype,new o)}}(),d=function(){return(d=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},v="NESW",y=function(){function t(t,e){this.moveWatchers=[],this.options=t,this.current=e}return t.prototype.turnLeft=function(){var t=this.current.orientation,e=v.indexOf(t)-1;e<0&&(e=v.length-1),this.current.orientation=v[e],this.addMove("rotate-left")},t.prototype.turnRight=function(){var t=this.current.orientation,e=v.indexOf(t)+1;e>=v.length&&(e=0),this.current.orientation=v[e],this.addMove("rotate-right")},t.prototype.nextPosition=function(){var t,e,o,r=this.current,n=r.orientation,l=r.position,c=this.options,f=c.size,_=c.walls;switch(n){case"N":e="y",o=-1;break;case"S":e="y",o=1;break;case"W":e="x",o=-1;break;case"E":e="x",o=1;break;default:throw new h("orientation")}var v=l[e]+o;if(v<0||v>=f[e])throw new h("map-overflow");var y=d(d({},l),((t={})[e]=v,t)),w=new h("wall-hit"),m=o<0?y:l;if(_[e].some((function(t){return t.x===m.x&&t.y===m.y})))throw w;return{axis:e,sign:o,position:y}},t.prototype.move=function(){try{var t=this.nextPosition().position;return this.current.position=t,this.addMove("forward"),Promise.resolve()}catch(t){return Promise.reject(t)}},t.prototype.canMove=function(){try{return this.nextPosition(),this.addMove("move-possible"),!0}catch(t){return this.addMove("move-blocked"),!1}},t.prototype.reset=function(){this.current.position=d({},this.options.start.position),this.current.orientation=this.options.start.orientation,this.addMove("reset")},t.prototype.addMove=function(t){this.moveWatchers.forEach((function(e){e(t)}))},t.prototype.onMove=function(t){this.moveWatchers.push(t)},t}(),w=function(t){function e(e,o,r){void 0===r&&(r=!1);var n=t.call(this,e,o)||this;return n.queue=[],n.ended=!1,n.nextAction="",n.debug=r,n}return _(e,t),e.GetActions=function(){var t=["constructor","nextPosition","addMove","onMove"];return Object.getOwnPropertyNames(y.prototype).filter((function(e){return!t.includes(e)}))},e.prototype.addToQueue=function(t){this.queue.push(t),this.debug||this.stepOver()},e.prototype.stepOver=function(){var t=this.queue.shift();"function"==typeof t&&t()},e.prototype.stop=function(){this.ended=!0},e}(y),m=w;w.GetActions().forEach((function(t){var e=w.prototype[t];w.prototype[t]=function(){for(var o=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new Promise((function(n,l){try{o.addMove("next-"+t),o.addToQueue((function(){if(o.ended)l();else{var t=e.apply(o,r);o.debug?n(t):setTimeout((function(){n(t)}),o.options.timeout)}}))}catch(t){o.ended=!0,l(t)}}))}}));o(181),o(46),o(88),o(263),o(54),o(53);var x=[{regex:/(?<!async\s+)function/gi,replacer:"async function"}];function O(code){var script=code,t=m.GetActions(),e="_"+(1e3*Math.random()).toFixed(0);return t.forEach((function(t){var o="await "+e+"."+t;script=script.replace(function(t){return new RegExp("(?<![a-z_\\$])"+t+"(?=\\s*\\()","ig")}(t),o)})),x.forEach((function(t){script=script.replace(t.regex,t.replacer)})),script.includes("await")||(script+="; return Promise.resolve();"),new Function(e,"return Promise.resolve().then(async function(){"+script+"});")}var M=function(){var t=function(e,b){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(t[p]=b[p])})(e,b)};return function(e,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function o(){this.constructor=e}t(e,b),e.prototype=null===b?Object.create(b):(o.prototype=b.prototype,new o)}}(),j=function(){return(j=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},$=function(t,e,o,desc){var r,l=arguments.length,c=l<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,o):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(n.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(l<3?r(c):l>3?r(e,o,c):r(e,o))||c);return l>3&&c&&Object.defineProperty(e,o,c),c},k=function(t,e){for(var i=0,o=e.length,r=t.length;i<o;i++,r++)t[r]=e[i];return t},E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.current={position:{x:0,y:0},orientation:"E"},e.actions=null,e.moves=[],e.cellWidth="10%",e}return M(e,t),e.prototype.range=function(t){return k([],new Array(t)).map((function(t,e){return e}))},e.prototype.isCurrent=function(t,col){var e=this.current.position,o=e.x;return t===e.y&&col===o},e.prototype.hasWallRight=function(t,col){return this.options.walls.x.some((function(e){return t===e.y&&col===e.x}))},e.prototype.hasWallLeft=function(t,col){return this.hasWallRight(t,col-1)},e.prototype.hasWallBottom=function(t,col){return this.options.walls.y.some((function(e){return t===e.y&&col===e.x}))},e.prototype.hasWallTop=function(t,col){return this.hasWallBottom(t-1,col)},e.prototype.onMovedUpdated=function(){var t=this;this.$nextTick((function(){t.$refs.console.scrollTop=t.$refs.console.scrollHeight}))},e.prototype.run=function(t){var e=this;void 0===t&&(t=!1),this.moves=[],this.actions=new m(this.options,this.current,t),this.actions.onMove((function(t){e.moves.push(t)})),O(this.$store.state.code)(this.actions).then((function(){e.moves.push("end")})).catch((function(t){new c.Howl({src:e.$nuxt.context.base+"sounds/bleating.mp3"}).play(),t.isRunnerError?e.moves.push("error-"+t.message):(e.moves.push("error-generic-"+t.message),console.error(t))})).then((function(){e.actions=null})),t&&this.$nextTick((function(){e.actions&&e.actions.stepOver()}))},e.prototype.debug=function(){this.run(!0)},e.prototype.stepOver=function(){this.actions&&this.actions.stepOver()},Object.defineProperty(e.prototype,"cellWidthStyle",{get:function(){return{"--cell-width":""+this.cellWidth}},enumerable:!1,configurable:!0}),e.prototype.resizeCell=function(){var t=this.$refs.tableWrapper;if(t){t.querySelector("table").attributes.style.value="--cell-width: 1px";var e=Math.floor(Math.min(t.clientWidth/this.options.size.y,t.clientHeight/this.options.size.x));this.cellWidth=e+"px",t.querySelector("table").attributes.style.value="--cell-width: "+e+"px"}},e.prototype.reset=function(){this.actions&&this.actions.stop();var t=this.options.start;this.current={position:j({},t.position),orientation:"E"},this.moves=[]},e.prototype.created=function(){this.reset()},e.prototype.mounted=function(){this.resizeCell(),this.resizeCellListener=this.resizeCell.bind(this),window.addEventListener("resize",this.resizeCellListener)},e.prototype.destroyed=function(){window.removeEventListener("resize",this.resizeCellListener)},$([Object(l.b)({default:function(){return{size:{x:4,y:4},start:{position:{x:0,y:0},orientation:"e"},walls:{x:[{x:0,y:0}],y:[{x:1,y:0}]},timeout:1e3}}})],e.prototype,"options",void 0),$([Object(l.d)("moves",{deep:!0})],e.prototype,"onMovedUpdated",null),e=$([l.a],e)}(l.c),W=o(255),z=o(32);var component=Object(z.a)(E,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:t.$style.world},[r("div",[t.actions?t._e():r("button",{class:t.$style.button,attrs:{type:"button"},on:{click:function(e){return t.run()}}},[t._v("\n            Run\n        ")]),t._v(" "),t.actions?t._e():r("button",{class:t.$style.button,attrs:{type:"button"},on:{click:t.reset}},[t._v("\n            Reset\n        ")]),t._v(" "),t.actions?t._e():r("button",{class:t.$style.button,attrs:{type:"button"},on:{click:t.debug}},[t._v("\n            Debug\n        ")]),t._v(" "),t.actions&&t.actions.debug?r("button",{class:t.$style.button,attrs:{type:"button"},on:{click:t.stepOver}},[t._v("\n            Step over\n        ")]):t._e()]),t._v(" "),r("div",{ref:"tableWrapper",class:t.$style.table_wrapper},[r("table",{class:t.$style.table,style:t.cellWidthStyle},[r("tbody",t._l(t.range(t.options.size.y),(function(e){return r("tr",{key:e},t._l(t.range(t.options.size.x),(function(col){var n;return r("td",{key:col,class:t.$style.cell},[r("div",{class:(n={},n[t.$style.cell__inner]=!0,n[t.$style.cell_current]=t.isCurrent(e,col),n[t.$style.wall_right]=t.hasWallRight(e,col),n[t.$style.wall_left]=t.hasWallLeft(e,col),n[t.$style.wall_top]=t.hasWallTop(e,col),n[t.$style.wall_bottom]=t.hasWallBottom(e,col),n[t.$style.facing_up]="N"===t.current.orientation,n[t.$style.facing_down]="S"===t.current.orientation,n[t.$style.facing_left]="W"===t.current.orientation,n[t.$style.facing_right]="E"===t.current.orientation,n)},[t.isCurrent(e,col)?r("img",{class:t.$style.cell__img,attrs:{src:o(254),alt:"Mioara"}}):t._e()])])})),0)})),0)])]),t._v(" "),r("div",{ref:"console",class:t.$style.console},t._l(t.moves,(function(e,o){return r("div",{key:e+o},["reset"===e?[t._v("\n                Miorița teleported to the start position\n            ")]:"rotate-left"===e?[t._v("\n                Miorița turned left (counter-clockwise)\n            ")]:"rotate-right"===e?[t._v("\n                Miorița turned right (clockwise)\n            ")]:"forward"===e?[t._v("\n                Miorița moved forward\n            ")]:"move-possible"===e?[t._v("\n                Miorița realized she can move forward\n            ")]:"move-blocked"===e?[t._v("\n                Miorița realized she cannot move forward\n            ")]:"next-turnLeft"===e?[t._v("\n                Miorița will turn left\n            ")]:"next-turnRight"===e?[t._v("\n                Miorița will turn right\n            ")]:"next-canMove"===e?[t._v("\n                Miorița is analyzing if she can move forward\n            ")]:"next-move"===e?[t._v("\n                Miorița will try to move forward\n            ")]:"end"===e?[t._v("\n                Miorița has ended her programming\n            ")]:"error-orientation"===e?r("span",{class:t.$style.error},[t._v("\n                Miorița is a little dizzy\n            ")]):"error-map-overflow"===e?r("span",{class:t.$style.error},[t._v("\n                Miorița cannot get out of her sheepfold\n            ")]):"error-wall-hit"===e?r("span",{class:t.$style.error},[t._v("\n                Miorița cannot get over the fence\n            ")]):e.startsWith("error-generic")?r("span",{class:t.$style.error},[t._v("\n                "+t._s(e.substring("error-generic-".length))+"\n            ")]):t._e()],2)})),0)])}),[],!1,(function(t){this.$style=W.default.locals||W.default}),null,null);e.default=component.exports}}]);